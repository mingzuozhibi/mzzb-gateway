##
# test login
##

# test register
echo '{"username": "test", "password": "test"}' | http post :9999/gateway/register

# test register again
echo '{"username": "test", "password": "test"}' | http post :9999/gateway/register

# test query
http :9999/gateway/session

# test login
echo '{"username": "test", "password": "test"}' | http --session /tmp/session.json post :9999/gateway/session

# test query with cookies
http --session /tmp/session.json :9999/gateway/session

# test query without cookies
http :9999/gateway/session

# test logout
http --session /tmp/session.json delete :9999/gateway/session

# test query with cookies
http --session /tmp/session.json :9999/gateway/session

# test login error password
echo '{"username": "test", "password": "pass"}' | http post :9999/gateway/session

# test login empty password
echo '{"username": "test", "password": ""}' | http post :9999/gateway/session
